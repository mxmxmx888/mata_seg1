{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      (function setInitialTheme() {
        var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
        var theme = prefersDark && prefersDark.matches ? 'dark' : 'light';
        document.documentElement.dataset.theme = theme;
        document.documentElement.style.colorScheme = theme;
      })();
    </script>

	    <link rel="icon" href="{% static 'images/favicon.ico' %}">
	    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png' %}">
	    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
	    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}">
	    <link rel="manifest" href="{% static 'site.webmanifest' %}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
   
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link href="{% static 'css/base/base.css' %}" rel="stylesheet">
    <link href="{% static 'css/navbar/navbar.css' %}" rel="stylesheet">
    <link href="{% static 'css/auth/auth.css' %}" rel="stylesheet">
    <link href="{% static 'css/app/app.css' %}" rel="stylesheet">
    <link href="{% static 'css/post/post.css' %}" rel="stylesheet">

    {% block page_css %}{% endblock %}
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

	    <title>{% block title %}Recipi{% endblock %}</title>
       
	  </head>

	  <body data-theme="light" class="{% block body_class %}{% endblock %}">
	    {% block body %}
	    {% endblock %}
		    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
		    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.min.js" integrity="sha384-PsUw7Xwds7x08Ew3exXhqzbhE+IOYy5n3zVb9r9l6U8Bh3sl0Nv1B2TR9O/V9K6" crossorigin="anonymous"></script>

		    <script>
		      document.addEventListener('DOMContentLoaded', function () {
		        const nav = document.querySelector('.navbar-recipi');
		        const isAuth = document.body.classList.contains('auth-body');
		        const prefersDark = window.matchMedia &&
		          window.matchMedia('(prefers-color-scheme: dark)');

		        function applyThemeFromSystem() {
		          const theme = prefersDark && prefersDark.matches ? 'dark' : 'light';
		          document.documentElement.dataset.theme = theme;
		          document.documentElement.style.colorScheme = theme;
		          document.body.dataset.theme = theme;
		        }

		        if (nav && !isAuth) {
		          function toggleNavSolid() {
		            if (window.scrollY > 40) {
		              nav.classList.add('navbar-solid');
		            } else {
		              nav.classList.remove('navbar-solid');
		            }
		          }
		          toggleNavSolid();
		          window.addEventListener('scroll', toggleNavSolid);
		        }

		        applyThemeFromSystem();
		        if (prefersDark) {
		          prefersDark.addEventListener('change', applyThemeFromSystem);
		        }

        if (!window.bootstrap || !window.bootstrap.Collapse) {
          document.querySelectorAll('[data-bs-toggle=\"collapse\"]').forEach(function (toggle) {
            const targetSelector = toggle.getAttribute('data-bs-target') || toggle.getAttribute('href');
            if (!targetSelector) return;
            const target = document.querySelector(targetSelector);
            if (!target) return;

            toggle.addEventListener('click', function (event) {
              event.preventDefault();
              const isOpen = target.classList.toggle('show');
              toggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
              toggle.classList.toggle('collapsed', !isOpen);
            });
          });
        }

		        if (!window.bootstrap || !window.bootstrap.Dropdown) {
		          document.querySelectorAll('[data-bs-toggle="dropdown"]').forEach(function (toggle) {
		            const menu = toggle.nextElementSibling;
		            if (!menu || !menu.classList.contains('dropdown-menu')) return;

		            toggle.addEventListener('click', function (event) {
		              event.preventDefault();
		              menu.classList.toggle('show');
		            });

		            document.addEventListener('click', function (event) {
		              if (!toggle.closest('.dropdown')) return;
		              if (!toggle.closest('.dropdown').contains(event.target)) {
		                menu.classList.remove('show');
		              }
		            });
		          });
		        }

		        if (!window.bootstrap || !window.bootstrap.Tab) {
		          document.querySelectorAll('[data-bs-toggle="tab"], [data-bs-toggle="pill"]').forEach(function (toggle) {
		            toggle.addEventListener('click', function (event) {
		              event.preventDefault();

		              const targetSelector =
		                toggle.getAttribute('data-bs-target') || toggle.getAttribute('href');
		              if (!targetSelector) return;

		              const target = document.querySelector(targetSelector);
		              if (!target) return;

		              const tablist = toggle.closest('[role="tablist"]');
		              if (tablist) {
		                tablist.querySelectorAll('[data-bs-toggle="tab"], [data-bs-toggle="pill"]').forEach(function (btn) {
		                  btn.classList.remove('active');
		                  btn.setAttribute('aria-selected', 'false');
		                });
		              }

		              toggle.classList.add('active');
		              toggle.setAttribute('aria-selected', 'true');

		              const tabContent = target.closest('.tab-content');
		              if (tabContent) {
		                tabContent.querySelectorAll('.tab-pane').forEach(function (pane) {
		                  pane.classList.remove('active', 'show');
		                });
		              }

		              target.classList.add('active', 'show');
		            });
		          });
		        }

		        document.querySelectorAll('.auth-card form').forEach(function (form) {
		          form.querySelectorAll('label').forEach(function (label) {
		            const id = label.getAttribute('for');
		            if (!id) return;
		            const input = form.querySelector('#' + id);
		            if (!input) return;
		            if (!input.placeholder) {
		              input.placeholder = label.textContent.trim();
		            }
		            label.style.display = 'none';
		          });
		        });

		        const dashboardSelects = document.querySelectorAll('.dashboard-filter-select');

		        function autosizeDashboardFilter(select) {
		          if (!select) return;

		          const selectedOption = select.options[select.selectedIndex];
		          if (!selectedOption) return;

		          const measuringSpan = document.createElement('span');
		          const computed = window.getComputedStyle(select);

		          measuringSpan.textContent = selectedOption.text;
		          measuringSpan.style.position = 'fixed';
		          measuringSpan.style.visibility = 'hidden';
		          measuringSpan.style.whiteSpace = 'nowrap';
		          measuringSpan.style.font = computed.font;

		          document.body.appendChild(measuringSpan);
		          const textWidth = measuringSpan.getBoundingClientRect().width;
		          document.body.removeChild(measuringSpan);

		          const horizontalPadding =
		            parseFloat(computed.paddingLeft || '0') +
		            parseFloat(computed.paddingRight || '0') +
		            20;

		          select.style.width = `${textWidth + horizontalPadding}px`;
		        }

		        dashboardSelects.forEach(function (select) {
		          autosizeDashboardFilter(select);
		          select.addEventListener('change', function () {
		            autosizeDashboardFilter(select);
		          });
		        });
		      });
		    </script>
	  </body>
	</html>
